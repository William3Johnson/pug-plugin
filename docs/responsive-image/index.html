<!DOCTYPE html><html lang="en" dir="ltr"><head><meta charset="UTF-8"><title>Responsive image</title><link rel="icon" type="image/png" sizes="64x64" href="/pug-plugin/responsive-image/assets/img/favicon.7edd8839c25dd600536b35973f37f250-64w.png"><link rel="stylesheet" href="/pug-plugin/responsive-image/assets/css/main.43a8a061.css"></head><body><div class="main-header"><div class="header-container"><div class="header-content"><h1 class="text">Responsive image</h1></div><img srcset="/pug-plugin/responsive-image/assets/img/astronaft-org.4a698058f6d62f0a6a73ddb9bb23dc20-480w.webp 480w,/pug-plugin/responsive-image/assets/img/astronaft-org.f731a40eae1d5cab57f7eb774a7dcb4f-640w.webp 640w,/pug-plugin/responsive-image/assets/img/astronaft-org.61bb0633816e1d1b16afb1ad6701e24f-800w.webp 800w,/pug-plugin/responsive-image/assets/img/astronaft-org.242437da4937dfded1a970683c25d2e8-1024w.webp 1024w,/pug-plugin/responsive-image/assets/img/astronaft-org.6697dc3690590b998bb4dbe7cb168073-1450w.webp 1450w,/pug-plugin/responsive-image/assets/img/astronaft-org.939127955cd47b9fbb3da139196dd3c7-1920w.webp 1920w" src="/pug-plugin/responsive-image/assets/img/astronaft.b7454a8fe08c154c6ebd2d943442d14c-480w.jpg" alt="responsive image"></div></div><main class="main-content"><section><h1>How to use responsive images with Pug</h1><p>For responsive images is recommended to use the <a href="https://github.com/dazuaz/responsive-loader">responsible-loader</a>.
This is a very fast, high-quality and powerful module.
</p><h3>Setup</h3><p>Firstly, install and configure the <a href="https://github.com/webdiscus/pug-plugin#install">pug-plugin</a>,
then install modules:</p><pre class="language-"><code>npm install responsive-loader sharp --save-dev
</code></pre><p>Add to Webpack module rules following configuration:</p><pre class="language-"><code><span class="token punctuation">{</span>
  <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">.(gif|png|jpe?g|svg|webp)$</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">,</span>
  <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">'asset/resource'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">use</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">loader</span><span class="token operator">:</span> <span class="token string">'responsive-loader'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">options</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token comment">// output filename of images</span>
      <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'assets/img/[name].[hash:8]-[width]w.[ext]'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre><b>Note:</b><ul><li>the type must be defined as <code class="language-">asset/resource</code></li><li>in responsible-loader version >= 3.0.4 the default adapter is <code class="language-">sharp</code></li><li>define in the <code class="language-">name</code> option both public path and output filename</li></ul></section><section><h3>Usage of image with fixed size</h3><p>Defaults, an image without queries will stay in its original size and format.</p><p>To resize an single image use the <code class="language-">size</code> query parameter:</p><pre class="language-"><code><span class="token tag">img<span class="token attributes"><span class="token punctuation">(</span><span class="token attr-name">src</span><span class="token punctuation">=</span><span class="token attr-value"><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./image.jpg?size=200'</span></span><span class="token punctuation">)</span></span></span>)
</code></pre><p>To convert an image in other format, e.g. <code class="language-">webp</code>, use the <code class="language-">format</code> query parameter:</p><pre class="language-"><code><span class="token tag">img<span class="token attributes"><span class="token punctuation">(</span><span class="token attr-name">src</span><span class="token punctuation">=</span><span class="token attr-value"><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./image.jpg?size=200&amp;format=webp'</span></span><span class="token punctuation">)</span></span></span>)
</code></pre><h3>Examples</h3><table class="image-preview"><tr><td><img src="/pug-plugin/responsive-image/assets/img/gate.a09b60090b630672889c1d54cc31f860-100w.jpg" alt="fix image"></td><td><pre class="language-"><code><span class="token tag">img<span class="token attributes"><span class="token punctuation">(</span><span class="token attr-name">src</span><span class="token punctuation">=</span><span class="token attr-value"><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./image.jpg?size=100'</span></span><span class="token punctuation">)</span></span></span>)</code></pre></td></tr><tr><td><img src="/pug-plugin/responsive-image/assets/img/gate.bf1862059a852c0da01349bd853a64fc-120w.png" alt="fix image"></td><td><pre class="language-"><code><span class="token tag">img<span class="token attributes"><span class="token punctuation">(</span><span class="token attr-name">src</span><span class="token punctuation">=</span><span class="token attr-value"><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./image.jpg?size=120&amp;format=png'</span></span><span class="token punctuation">)</span></span></span>)</code></pre></td></tr><tr><td><img src="/pug-plugin/responsive-image/assets/img/gate.5bcfefb9e49672a1b20f9782a4848565-140w.webp" alt="fix image"></td><td><pre class="language-"><code><span class="token tag">img<span class="token attributes"><span class="token punctuation">(</span><span class="token attr-name">src</span><span class="token punctuation">=</span><span class="token attr-value"><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./image.jpg?size=140&amp;format=webp'</span></span><span class="token punctuation">)</span></span></span>)</code></pre></td></tr></table><h3>Usage of responsive image</h3><p>For a responsive image use the <code class="language-">sizes&lbrack;&rbrack;</code> query parameter.<br>
For the readability of your code, define the image object in a JS context, like so:</p><pre class="language-"><code><span class="token punctuation">-</span>
  <span class="token tag">const</span> <span class="token plain-text">responsiveImage = {</span>
    <span class="token comment">// default image</span>
    <span class="token tag">src<span class="token punctuation">:</span></span> <span class="token tag">require<span class="token attributes"><span class="token punctuation">(</span>'./image.jpg?<span class="token attr-name">size</span><span class="token punctuation">=</span><span class="token attr-value"><span class="token number">640</span>'</span><span class="token punctuation">)</span></span></span>,
    <span class="token comment">// responsive images</span>
    <span class="token tag">srcSet<span class="token punctuation">:</span></span> <span class="token tag">require<span class="token attributes"><span class="token punctuation">(</span>'./image.jpg?sizes[]<span class="token punctuation">=</span><span class="token attr-value"><span class="token number">480</span></span><span class="token punctuation">,</span>sizes[]<span class="token punctuation">=</span><span class="token attr-value"><span class="token number">640</span></span><span class="token punctuation">,</span>sizes[]<span class="token punctuation">=</span><span class="token attr-value"><span class="token number">800</span></span><span class="token punctuation">,</span>sizes[]<span class="token punctuation">=</span><span class="token attr-value"><span class="token number">1024</span></span><span class="token punctuation">,</span>sizes[]<span class="token punctuation">=</span><span class="token attr-value"><span class="token number">1450</span></span><span class="token punctuation">,</span>sizes[]<span class="token punctuation">=</span><span class="token attr-value"><span class="token number">1920</span>'</span><span class="token punctuation">)</span></span></span>,
  }
</code></pre><p><b>Note:</b> the <code class="language-">require('./image.jpg?sizes&lbrack;&rbrack;=480,sizes&lbrack;&rbrack;=640,...')</code>
in Pug returns directly a string with a comma-separated list of images.
</p><p>Then set the <code class="language-">srcset</code> and <code class="language-">src</code> image attributes:</p><pre class="language-"><code><span class="token tag">img<span class="token attributes"><span class="token punctuation">(</span><span class="token attr-name">src</span><span class="token punctuation">=</span><span class="token attr-value">responsiveImage<span class="token punctuation">.</span>src srcset<span class="token operator">=</span>responsiveImage<span class="token punctuation">.</span>srcSet alt<span class="token operator">=</span><span class="token string">"responsive image"</span></span><span class="token punctuation">)</span></span></span>
</code></pre><p>Generated HTML of responsive image:</p><pre class="language-"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/assets/images/image.af5d288cf6d0be8269fb6785de4dca47-640w.jpg.jpg<span class="token punctuation">"</span></span>
  <span class="token attr-name">srcset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/assets/images/image.c89a9aadd767f562f8cea83cf8d31b90-480w.jpg 480w,
    /assets/images/image.af5d288cf6d0be8269fb6785de4dca47-640w.jpg 640w,
    /assets/images/image.39668d49ebd9fba351e0df395b762f30-800w.jpg 800w,
    /assets/images/image.1b62e4707c5462a41627051bc4b26d54-1024w.jpg 1024w,
    /assets/images/image.1c1d5de33673303eacdfa27b9b7b6e00-1450w.jpg 1450w,
    /assets/images/image.c62bf05c4abc346d0239e964ab096228-1920w.jpg 1920w<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
</code></pre><p>The result of responsive image see in header of this site.</p><h3>Extract property</h3><p>To extract any single property from original <code class="language-">responsible-loader</code> object use the <code class="language-">prop=PROP_NAME</code> query parameter.<br>
Supported properties: <code class="language-">srcSet</code> <code class="language-">src</code> <code class="language-">width</code> and <code class="language-">height</code>.<br>
For example:
</p><pre class="language-"><code><span class="token tag">p</span><span class="token punctuation">.</span><span class="token multiline-plain-text">
  width: #{require("./image.jpg?prop=width&amp;sizes[]=100,sizes[]=200")}
  height: #{require("./image.jpg?prop=height&amp;sizes[]=100,sizes[]=200")}
</span>
<span class="token tag">p</span> <span class="token plain-text">srcSet: #{require("./image.jpg?prop=srcSet&amp;format=webp&amp;sizes[]=100,sizes[]=200,sizes[]=300")}</span>

<span class="token tag">p</span> <span class="token plain-text">src webp: #{require("./image.jpg?prop=src&amp;format=webp&amp;size=200")}</span></code></pre></section></main><div class="footer-container"><div>Copyleft <span class="copyleft"></span> 2022 <a href="https://github.com/webdiscus">@webdiscus</a>.
Powered by <a href="https://github.com/webdiscus/pug-plugin">Pug Plugin</a>
and <a href="https://github.com/dazuaz/responsive-loader">Responsive Loader</a>.
</div></div><script src="/pug-plugin/responsive-image/assets/js/main.da8fa5e7.js"></script></body></html>